(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),s=a.n(o),l=a(64),i=a(13),c=a(8),m=a(9),u=a(10),d=a(11),h=a(57),p=a.n(h),y=a(26),f=a(20),v=a(6),g=a(5),E=a(14),b=a(27);var k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.socket=void 0,n.firstForm=null,n.createRoomSubmit=function(){var e=n.state.username.trim(),t=n.state.roomName.trim();n.setState({username:e,roomName:t,isFormOneValidated:!0}),0!==e.length&&0!==t.length&&n.socket.emit("create_game",{roomName:t,username:e,mod:n.state.gameMode.toLowerCase()})},n.connectRoomOnSubmit=function(e){e.preventDefault();var t=n.state.username.trim(),a=n.state.roomName.trim();n.setState({username:t,roomName:a,isFormTwoValidated:!0}),n.socket.emit("connect_game",{game_id:n.state.gameId,username:t})},n.state={isFormTwoValidated:!1,isFormOneValidated:!1,username:"",roomName:"",gameId:-1,board:[],gameMode:"Easy"},n.socket=e.socket,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("game_data",(function(t){var a=t.game_id,n=t.board,r=t.hosting,o=t.roomName,s=t.players;e.props.onConnect({gameId:a,board:n,username:e.state.username,roomName:o,isHost:r,players:s})}))}},{key:"componentWillReceiveProps",value:function(e){e.socket&&(this.socket=e.socket),this.setState(this.state)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",margin:"10vh 0px 3vh 0px"}},r.a.createElement("h1",null,"Sudoku Race")),r.a.createElement("div",{style:{width:"100vw",minHeight:"20%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{minWidth:"50%",minHeight:"20%",marginTop:"3vh"}},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,r.a.createElement(f.a.Toggle,{as:E.a,variant:"link",eventKey:"0"},"Create Game")),r.a.createElement(f.a.Collapse,{eventKey:"0"},r.a.createElement(v.a.Body,null,r.a.createElement(g.a,{ref:function(t){return e.firstForm=t},validated:this.state.isFormOneValidated,onSubmit:function(t){t.preventDefault(),e.createRoomSubmit()}},r.a.createElement(g.a.Group,{controlId:"formUsername"},r.a.createElement(g.a.Label,null,"Username"),r.a.createElement(g.a.Control,{required:!0,placeholder:"Pick a username",value:this.state.username,onChange:function(t){t.preventDefault(),e.setState({username:t.target.value})}})),r.a.createElement(g.a.Group,{controlId:"formRoomname"},r.a.createElement(g.a.Label,null,"Room Name"),r.a.createElement(g.a.Control,{required:!0,placeholder:"Enter a room name",value:this.state.roomName,onChange:function(t){t.preventDefault(),e.setState({roomName:t.target.value})}})),r.a.createElement(g.a.Group,{controlId:"modCheck"},r.a.createElement(g.a.Label,null,"Game mod"),r.a.createElement(g.a.Check,{type:"radio",label:"Easy",checked:"Easy"===this.state.gameMode,onChange:function(t){return e.setState({gameMode:"Easy"})}}),r.a.createElement(g.a.Check,{type:"radio",label:"Medium",checked:"Medium"===this.state.gameMode,onChange:function(t){return e.setState({gameMode:"Medium"})}}),r.a.createElement(g.a.Check,{type:"radio",label:"Hard",checked:"Hard"===this.state.gameMode,onChange:function(t){return e.setState({gameMode:"Hard"})}})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Create"))))),r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,r.a.createElement(f.a.Toggle,{as:E.a,variant:"link",eventKey:"1"},"Connect a game")),r.a.createElement(f.a.Collapse,{eventKey:"1"},r.a.createElement(v.a.Body,null,r.a.createElement(g.a,{onSubmit:this.connectRoomOnSubmit},r.a.createElement(g.a.Group,{controlId:"formUsernameConnect"},r.a.createElement(g.a.Label,null,"Username"),r.a.createElement(g.a.Control,{required:!0,placeholder:"Pick a username",value:this.state.username,onChange:function(t){t.preventDefault(),e.setState({username:t.target.value})}})),r.a.createElement(g.a.Group,{controlId:"formRoomnameConnect"},r.a.createElement(g.a.Label,null,"Game Id"),r.a.createElement(g.a.Control,{required:!0,placeholder:"Enter id of the game",value:this.state.gameId,onChange:function(t){t.preventDefault(),e.setState({gameId:Number(t.target.value)})}})),r.a.createElement(E.a,{variant:"primary",type:"submit"},"Connect")))))))))}}]),a}(r.a.PureComponent),S=a(63);function C(){var e=Object(y.a)(["\n    input {\n        border: none;\n        background-color: transparent;\n        &:focus {\n            outline: none;\n        }\n        width: 90%;\n        height: 90%;\n        font-size: 4vw;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n    }\n    .cell {\n        background-color: #edebe6;\n        font-color: black;\n    }\n    .disabled {\n        background-color: transparent;\n        font-color: gray;\n    }\n"]);return C=function(){return e},e}var O,I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.lastFocused="0|0",n.performOnCheck=function(){n.props.onCheck(n.state.board)},n.state={board:e.initalBoard?e.initalBoard:[["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""]],selected:"0|0"},n}return Object(m.a)(a,[{key:"copy2dArray",value:function(e){var t=[];return e.forEach((function(e){var a=[];e.forEach((function(e){return a.push(e)})),t.push(a)})),t}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=b.a.div(C());return r.a.createElement(t,null,r.a.createElement.apply(r.a,["div",null].concat(Object(i.a)(this.state.board.map((function(t,a){return r.a.createElement.apply(r.a,["div",{style:{display:"flex",flexDirection:"row"}}].concat(Object(i.a)(t.map((function(t,n){var o=e.state.selected.split("|").map((function(e){return Number(e)})),s=Object(S.a)(o,2),l=s[0],i=s[1];return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",border:"solid 1px gray",width:"5vw",height:"5vw",borderRight:2===n||5===n?"solid 0.4vw #797979":"solid 1px gray",borderBottom:2===a||5===a?"solid 0.4vw #797979":"solid 1px gray"}},r.a.createElement("input",{onFocus:function(t){e.lastFocused=t.target.id,e.setState({selected:t.target.id})},disabled:!!e.props.initalBoard&&""!==e.props.initalBoard[a][n],autoFocus:e.lastFocused==="".concat(a,"|").concat(n),style:a===l||n===i?{backgroundColor:" #edebe6",color:"black"}:{backgroundColor:" transparent",color:"gray"},className:0===t?"cell":"disabled cell",id:"".concat(a,"|").concat(n),key:"".concat(a,"|").concat(n),value:t,onChange:function(t){var r,o=t.target.value.trim();try{r=""===o?0:Number(o.charAt(o.length-1));var s=e.copy2dArray(e.state.board);s[a][n]=isNaN(r)?0:r,e.setState({board:s})}catch(l){}}}))})))))}))))))}}]),a}(r.a.PureComponent),j=a(15),N=function(e){var t=["","",""],a=e,n=Math.floor(a/36e5);t[0]=n<10?"0".concat(n):n.toString(),a%=36e5;var r=Math.floor(a/6e4);t[1]=r<10?"0".concat(r):r.toString(),a%=6e4;var o=Math.floor(a/1e3);return t[2]=o<10?"0".concat(o):o.toString(),t},_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.socket=void 0,n.timer=null,n.ingameBoard=null,n.updatePlayer=function(e){var t=0===e.filter((function(e){return 0!==e.filter((function(e){return""===e})).length})).length;!t&&t||n.socket.emit("board_check",{game_id:n.props.gameId,board:e,time_passed:n.state.time_passed})},n.state={board:n.copy2dArray(e.board),originalBoard:n.copy2dArray(e.board),players:e.players,time_passed:0},n.socket=e.socket,n}return Object(m.a)(a,[{key:"copy2dArray",value:function(e){var t=[];return e.forEach((function(e){var a=[];e.forEach((function(e){return a.push(e)})),t.push(a)})),t}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState({time_passed:e.state.time_passed+100})}),100)}},{key:"componentWillReceiveProps",value:function(e){e.players&&this.setState({players:e.players})}},{key:"render",value:function(){var e=this,t=N(this.state.time_passed);return n.createElement("div",{style:{width:"100vw",minHeight:"100vh",display:"flex",justifyContent:"space-around",alignItems:"center"}},n.createElement(I,{ref:function(t){return e.ingameBoard=t},onCheck:this.updatePlayer,initalBoard:this.state.board}),n.createElement(v.a,{style:{width:"40%"}},n.createElement(v.a.Header,null,this.props.roomName),n.createElement(v.a.Header,null,n.createElement("h1",null,t[0],":",t[1],":",t[2])),n.createElement(j.a,{variant:"flush"},this.state.players.map((function(e){return n.createElement(j.a.Item,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},variant:e.finished?"success":"warning"},n.createElement("span",null,e.username),n.createElement("span",null,e.finished?"Done in ".concat(N(e.time_passed).join(":")):"Solving"))}))),n.createElement(v.a.Footer,null,n.createElement(E.a,{onClick:function(t){return e.ingameBoard.performOnCheck()}},"Submit"))))}}]),a}(n.PureComponent),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.socket=void 0,n.state={players:e.players?e.players:[],player:e.player,isReady:e.isHost},n.socket=e.socket,n}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.players&&this.setState({players:e.players})}},{key:"render",value:function(){var e=this;return n.createElement("div",{style:{width:"100vw",height:"100vh",alignItems:"center",justifyContent:"center",display:"flex"}},n.createElement(v.a,{style:{minWidth:"60%"}},n.createElement(v.a.Header,null,n.createElement("span",null,"Lobby")),n.createElement(v.a.Header,null,n.createElement("h1",null,this.props.roomName),n.createElement("br",null),"ID: ",n.createElement("span",{style:{fontWeight:"bold"}},this.props.gameId)," ",n.createElement("br",null)),n.createElement(j.a,{variant:"flush"},n.createElement(j.a.Item,null,n.createElement(v.a,{style:{minWidth:"60%"}},n.createElement(v.a.Header,null,"Players"),n.createElement(j.a,{variant:"flush"},this.state.players.map((function(e){return n.createElement(j.a.Item,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},variant:e.ready?"success":e.hosting?"primary":"warning"},n.createElement("span",null,e.username),n.createElement("span",null,e.ready?"Ready":e.hosting?"Host":"Waiting"))}))))),n.createElement(j.a.Item,null,this.props.isHost?n.createElement(E.a,{onClick:this.props.onStart},0===this.state.players.filter((function(e){return!e.ready&&!e.hosting})).length?"Start":"Waiting..."):n.createElement(E.a,{disabled:this.state.isReady,onClick:function(t){e.socket.emit("user_ready",{game_id:e.props.gameId}),e.setState({isReady:!0})}},"Ready")))))}}]),a}(n.PureComponent),D=a(62),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.players.sort((function(e,t){return e.time_passed-t.time_passed}));return n.createElement("div",{style:{minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",display:"flex"}},n.createElement(D.a,{style:{minWidth:"60%"},striped:!0,bordered:!0,hover:!0,variant:"dark"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"#"),n.createElement("th",null,"Username"),n.createElement("th",null,"Time Elapsed"))),n.createElement("tbody",null,n.createElement.apply(n,["div",null].concat(Object(i.a)(e.map((function(e,t){return n.createElement("tr",null,n.createElement("td",null,t+1),n.createElement("td",null,e.username),n.createElement("td",null,N(e.time_passed).join(":")))}))))),n.createElement("tr",null,n.createElement("td",{colSpan:3},this.props.roomName)))))}}]),a}(n.PureComponent);!function(e){e[e.LANDING=0]="LANDING",e[e.LOBBY=1]="LOBBY",e[e.PLAYING=2]="PLAYING",e[e.OVER=3]="OVER"}(O||(O={}));var R=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=void 0,n.socket=void 0,n.onStart=function(){n.socket.emit("start_game",{game_id:n.state.gameId})},n.onEnd=function(){n.setState({gameState:O.OVER})},n.state={userId:"",gameState:O.LANDING,board:[],gameId:-1,roomName:"Game #0",username:"Sample User",players:[],isHost:!0,startingDate:-1},n.socket=p()("https://sudoku-race.herokuapp.com"),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("user_data",(function(t){e.setState({userId:t.user_id})})),this.socket.on("user_disconnected",(function(t){var a=Object(i.a)(e.state.players);a=a.filter((function(e){return e.id!==t.user_id})),e.setState({players:a})})),this.socket.on("connection_error",(function(e){var t=e.message;alert(t)})),this.socket.on("player_joined",(function(t){var a=Object(i.a)(e.state.players);a.push(t),e.setState({players:a})})),this.socket.on("user_ready_update",(function(t){var a=Object(i.a)(e.state.players);a=a.map((function(e){return e.id===t.user_id?{id:e.id,username:e.username,hosting:e.hosting,ready:!0}:e})),e.setState({players:a})})),this.socket.on("start_game_",(function(t){e.setState({startingDate:Date.now(),gameState:O.PLAYING})})),this.socket.on("user_finished",(function(t){var a=t.user_id,n=t.time_passed,r=Object(i.a)(e.state.players),o=1;r=r.map((function(e){return e.finished&&o++,e.id===a?{id:e.id,username:e.username,hosting:e.hosting,ready:e.ready,time_passed:n,finished:!0}:e})),o===r.length?e.setState({gameState:O.OVER,players:r}):e.setState({players:r})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.gameState===O.LANDING?r.a.createElement(k,{socket:this.socket,userId:this.state.userId,onConnect:function(t){e.setState(Object(l.a)({},t,{gameState:O.LOBBY}))}}):null,this.state.gameState===O.LOBBY?r.a.createElement(w,{onStart:this.onStart,socket:this.socket,gameId:this.state.gameId,isHost:this.state.isHost,roomName:this.state.roomName,players:this.state.players,player:{id:this.state.userId,username:this.state.username}}):null,this.state.gameState===O.PLAYING?r.a.createElement(_,{roomName:this.state.roomName,gameId:this.state.gameId,socket:this.socket,board:this.state.board,startingDate:this.state.startingDate,players:this.state.players}):null,this.state.gameState===O.OVER?r.a.createElement(B,{players:this.state.players,roomName:this.state.roomName}):null)}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(107);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a(108)}},[[66,1,2]]]);
//# sourceMappingURL=main.f8e46eb9.chunk.js.map